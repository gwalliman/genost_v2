function Body(a,b,c){this.interpreter=a,this.body=b,this.code=c,this.stmtList=null,this.startLine=null,this.lineNum=null,this.finishLine=null,this.method=null,this.varTable=[];var d=this.interpreter.getCurrentLineTokens();1==d.length&&d[0]==TERMINALS.SYMBOLS.OPENBRACE?(this.lineNum=this.startLine=this.interpreter.getCurrentLineNum(),this.findCloseBrace(),this.interpreter.goToNextLine(),this.interpreter.getCurrentLineNum()!=this.finishLine&&(this.stmtList=new StmtList(this.interpreter,this,this.code))):(this.interpreter.error("BODY",this.interpreter.getCurrentLineNum(),this.interpreter.getCurrentLine(),"Body must begin with {"),this.findCloseBrace(),this.interpreter.setCurrentLineNum(finishLine),this.interpreter.goToNextLine())}function Code(a){0==a.length&&(a=""),this.codeString=a,this.codeLines=this.codeString.split("\n"),this.codeLength=this.codeLines.length,this.tokenizedCode=[]}function Stmt(a,b){if(this.interpreter=a,this.body=b,this.lineNum=this.interpreter.getCurrentLineNum(),this.codeLine=this.interpreter.getCurrentLine(),this.tokenizedCode=this.interpreter.getCurrentLineTokens(),this.stmt={},this.stmtType=null,this.stmtType=TERMINALS.searchForTerminal(type[0],"STMTTYPES"),this.stmtType)if(this.stmtType==TERMINALS.STMTTYPES.VARDECL)this.stmt=new Vardecl(this.interpreter,this.body);else if(this.stmtType==TERMINALS.STMTTYPES.ASSIGN)this.stmt=new Assignment(this.interpreter,this.body);else if(this.stmtType==TERMINALS.STMTTYPES.METHODDEFINE)this.stmt=new MethodDefine(this.interpreter,this.body);else if(this.stmtType==TERMINALS.STMTTYPES.METHOD){var c=this.code.substring(this.code.length-1);!c==TERMINALS.STMTTYPES.SEMICOLON&&this.interpreter.error("METHOD",this.lineNum,this.codeLine,"Missing Semicolon"),this.stmt=new Method(this.interpreter,this.body,this.codeLine.substring(0,this.code.length-1))}else this.stmtType==TERMINALS.STMTTYPES.RETURN?this.stmt=new Return(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.IF?this.stmt=new If(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.ELSEIF?this.interpreter.error("STMT",this.lineNum,this.code,"ELSEIF must follow IF"):this.stmtType==TERMINALS.STMTTYPES.ELSE?this.interpreter.error("STMT",this.lineNum,this.code,"ELSE must follow IF or ELSEIF"):this.stmtType==TERMINALS.STMTTYPES.LOOPUNTIL?this.stmt=new LoopUntil(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.LOOPFOR?this.stmt=new LoopFor(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.WAITUNTIL?this.stmt=new WaitUntil(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.WAITFOR&&(this.stmt=new WaitFor(this.interpreter,this.body));else this.interpreter.error("STMT",this.lineNum,this.code,"STMT type is not valid.")}function StmtList(a,b){for(this.interpreter=a,this.body=b,this.stmt={},this.nextStmt={};0==this.interpreter.getCurrentLine().trim().length;)this.interpreter.goToNextLine();this.interpreter.getCurrentLineNum()!=this.body.getFinishLine()&&(this.stmt=new Stmt(this.interpreter,this.body,this.code)),a.goToNextLine(),null!=this.interpreter.getCurrentLine()&&this.interpreter.getCurrentLineNum()!=this.body.getFinishLine()&&(this.nextStmt=new StmtList(this.interpreter,this.body))}Body.prototype.findCloseBrace=function(){for(var a=1;0!=a&&null!=this.interpreter.goToNextLine();){var b=this.interpreter.getCurrentLineTokens();1==b.length&&b[0]==TERMINALS.SYMBOLS.OPENBRACE?a++:1==b.length&&b[0]==TERMINALS.SYMBOLS.CLOSEBRACE&&a--}0==a?(this.finishLine=this.interpreter.getCurrentLineNum(),this.interpreter.setCurrentLineNum(this.startLine)):this.interpreter.error("BODY",this.interpreter.getCurrentLineNum(),this.interpreter.getCurrentLine(),"Body must end with }")},Body.prototype.getStmtList=function(){return this.stmtList},Body.prototype.getStartLine=function(){return this.startLine},Body.prototype.getFinishLine=function(){return this.finishLine},Body.prototype.print=function(){null!=this.stmtList?(this.interpreter.writeln("parse","BODY: Start Line "+this.startLine+", Finish Line "+this.finishLine),this.interpreter.writeln("parse","{"),null!=this.stmtList?this.stmtList.print():this.interpreter.write("parse","EMPTY BODY"),this.interpreter.write("parse","}")):this.interpreter.write("parse","EMPTY BODY")},Code.prototype.getCodeLength=function(){return this.codeLength},Code.prototype.getLine=function(a){return a>=0&&a<this.codeLength?this.codeLines[a]:void 0},Code.prototype.getTokenizedLine=function(a){return a>=0&&a<this.codeLength?this.tokenizedCode[a]:void 0},Code.prototype.checkAlphaNumeric=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a.charCodeAt(c),!(b>47&&58>b||b>64&&91>b||b>96&&123>b))return!1;return!0},Code.prototype.exciseString=function(a){a=a.substring(1,a.length);var b=a.split(TERMINALS.SYMBOLS.QUOTE);1==b.length;var c=b.shift(),d=b.join();return[TERMINALS.SYMBOLS.QUOTE+c+TERMINALS.SYMBOLS.QUOTE,d]},Code.prototype.implode=function(a,b,c,d){for(var e=Array(),f=c;d>=f;f++)e.push(a[f]);return e.join(b)},Code.prototype.tokenizeLine=function(a,b){var c=new Array;console.log("Line "+a+" Codeline: "+b);var d=b.trim().split(" ");console.log("Line "+a+" Pass: "+d);for(var e=0,f=d.length;f>e;e++){var g=d[e].trim();if(console.log("Line "+a+" Token "+e+": "+g),g.length>0)if(this.checkAlphaNumeric(g))console.log("Line "+a+" "+g+" is alphanumeric, pushing"),c.push(g);else{if(console.log("Line "+a+" "+g+" is not alphanumeric"),g.indexOf(TERMINALS.SYMBOLS.QUOTE>-1)&&g.substring(0,1)==TERMINALS.SYMBOLS.QUOTE){console.log("Line "+a+" "+g+" contains a Type 3 (string)");var h=this.implode(d," ",e,d.length-1),i=this.exciseString(h);if(c.push(i[0]),h=i[1]){var j=this.tokenizeLine(a,h);j.forEach(function(a){c.push(a)})}return c}if(g.indexOf(TERMINALS.SYMBOLS.DASH)>-1&&g.substring(0,1)==TERMINALS.SYMBOLS.DASH){console.log("Line "+a+" "+g+" contains a Type 4 (negative number)");for(var k=1,l=2,m=TERMINALS.SYMBOLS.DASH;l<=g.length&&!isNaN(g.substring(k,l));)m+=g.substring(k,l),k++,l++;c.push(m);var n=g.substring(k,g.length),h=n+this.implode(d," ",e+1,d.length-1);if(h){var j=this.tokenizeLine(a,h);j.forEach(function(a){c.push(a)})}return c}console.log("Line "+a+"  "+g+" contains a Type 1 (symbol)");var o=TERMINALS.searchForTerminal(g,"SYMBOLS");if(o){var p=g.split(o),q=p.shift();console.log("Line "+a+" Left: "+q);var r=p.join();console.log("Line "+a+" Right: "+r),q&&c.push.apply(c,this.tokenizeLine(a,q)),c.push(o),r&&c.push.apply(c,this.tokenizeLine(a,r));break}}}return c},Code.prototype.tokenizeCode=function(){for(var a=0,b=this.codeLines.length;b>a;a++){var c=this.tokenizeLine(a,this.codeLines[a]);this.tokenizedCode.push(c)}},Code.prototype.printTokens=function(a){var b=a.join("|");return b},Code.prototype.printAllTokens=function(){var a=this,b="";return this.tokenizedCode.forEach(function(c){b+=a.printTokens(c)+"\n==========\n"}),b};var INTERPRETER={varStack:{},methodTable:{},extMethodTable:{},currentLineNum:0,code:{},body:{},getCurrentLineNum:function(){return this.currentLineNum},setCurrentLineNum:function(a){a>=0&&a<=this.code.getCodeLength()&&(this.currentLineNum=a)},getCurrentLine:function(){return this.code.getLine(this.currentLineNum)},getCurrentLineTokens:function(){return this.code.getTokenizedLine(this.currentLineNum)},goToNextLine:function(){return this.currentLineNum<this.code.getCodeLength()&&this.currentLineNum++,this.code.getLine(this.currentLineNum)},initialize:function(){},loadCode:function(a){this.code=new Code(a),this.code.tokenizeCode()},parseCode:function(){this.body=new Body(this,null,this.code),console.log(this.body)},printAllTokens:function(){return this.code.printAllTokens()},showMessage:function(a){return"parse"==a?!0:"validate"==a?!1:"debug"==a?!0:!0},error:function(a,b,c,d){var e=a.toUpperCase()+" ERROR Near Line "+b+": "+c+"\n"+d;throw console.log(e),new Error(e)},write:function(a,b){this.showMessage(a)&&console.log(b)},writeln:function(a,b){this.showMessage(a)&&console.log(b+"\n")}};Stmt.prototype.type=function(){return this.stmtType},Stmt.prototype.getStmt=function(){return this.stmt},Stmt.prototype.print=function(){stmt.print()},StmtList.prototype.getStmt=function(){return this.stmt},StmtList.prototype.getNextStmt=function(){return this.nextStmt},StmtList.prototype.print=function(){null!=this.stmt?(this.stmt.print(),this.interpreter.write("parse","\n"),null!=this.nextStmt&&this.nextStmt.print()):this.interpreter.writeln("parse","EMPTY STMTLIST")};var TERMINALS={SYMBOLS:{OPENPAREN:"(",CLOSEPAREN:")",OPENBRACE:"{",CLOSEBRACE:"}",OPENBRACKET:"[",CLOSEBRACKET:"]",QUOTE:'"',SEMICOLON:";",EQUALS:"=",COMMA:",",EQ:"==",NEQ:"!=",LT:"<",GT:">",LTE:"<=",GTE:">=",DASH:"-"},comparators:[this.EQ,this.NEQ,this.LT,this.GT,this.LTE,this.GTE],VOID:"void",INT:"int",STRING:"string",BOOL:"bool",TRUE:"true",FALSE:"false",AND:"and",OR:"or",VAR:"var",dataTypes:[this.VOID,this.INT,this.STRING,this.BOOL],logOps:[this.AND,this.OR],booleanVals:[this.TRUE,this.FALSE],STMTTYPES:{ASSIGN:"assign",VARDECL:"vardecl",METHODDEFINE:"methoddefine",METHOD:"method",RETURN:"return",IF:"if",ELSEIF:"elseif",ELSE:"else",LOOPUNTIL:"loopuntil",LOOPFOR:"loopfor",WAITUNTIL:"waituntil",WAITFOR:"waitfor"},callTypes:[this.VAR,this.METHOD],reservedWords:[this.OPENPAREN,this.CLOSEPAREN,this.OPENBRACE,this.CLOSEBRACE,this.OPENBRACKET,this.CLOSEBRACKET,this.QUOTE,this.SEMICOLON,this.COMMA,this.EQ,this.NEQ,this.LTE,this.GTE,this.EQUALS,this.LT,this.GT,this.DASH,this.VOID,this.INT,this.STRING,this.BOOL,this.AND,this.OR,this.TRUE,this.FALSE,this.ASSIGN,this.VARDECL,this.METHODDEFINE,this.METHOD,this.RETURN,this.IF,this.ELSEIF,this.ELSE,this.LOOPUNTIL,this.LOOPFOR,this.WAITUNTIL,this.WAITFOR,this.VAR,this.METHOD],searchForTerminal:function(a,b){if(null!=this[b])for(var c in this[b])if(this[b].hasOwnProperty(c)&&a.indexOf(this[b][c])>-1)return this[b][c];return FALSE}};