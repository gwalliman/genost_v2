function Body(t,e,i){this.interpreter=t,this.body=e,this.code=i,this.stmtList=null,this.startLine=null,this.lineNum=null,this.finishLine=null,this.method=null,this.varTable=[];var r=this.interpreter.getCurrentLineTokens();1==r.length&&r[0]==TERMINALS.SYMBOLS.OPENBRACE?(this.lineNum=this.startLine=this.interpreter.getCurrentLineNum(),this.findCloseBrace(),this.interpreter.goToNextLine(),this.interpreter.getCurrentLineNum()!=this.finishLine&&(this.stmtList=new StmtList(this.interpreter,this,this.code))):(this.interpreter.error("BODY",this.interpreter.getCurrentLineNum(),this.interpreter.getCurrentLine(),"Body must begin with {"),this.findCloseBrace(),this.interpreter.setCurrentLineNum(finishLine),this.interpreter.goToNextLine())}Body.prototype.findCloseBrace=function(){for(var t=1;0!=t&&null!=this.interpreter.goToNextLine();){var e=this.interpreter.getCurrentLineTokens();1==e.length&&e[0]==TERMINALS.SYMBOLS.OPENBRACE?t++:1==e.length&&e[0]==TERMINALS.SYMBOLS.CLOSEBRACE&&t--}0==t?(this.finishLine=this.interpreter.getCurrentLineNum(),this.interpreter.setCurrentLineNum(this.startLine)):this.interpreter.error("BODY",this.interpreter.getCurrentLineNum(),this.interpreter.getCurrentLine(),"Body must end with }")},Body.prototype.getStmtList=function(){return this.stmtList},Body.prototype.getStartLine=function(){return this.startLine},Body.prototype.getFinishLine=function(){return this.finishLine},Body.prototype.print=function(){null!=this.stmtList?(this.interpreter.writeln("parse","BODY: Start Line "+this.startLine+", Finish Line "+this.finishLine),this.interpreter.writeln("parse","{"),null!=this.stmtList?this.stmtList.print():this.interpreter.write("parse","EMPTY BODY"),this.interpreter.write("parse","}")):this.interpreter.write("parse","EMPTY BODY")};
function Code(e){0==e.length&&(e=""),this.codeString=e,this.codeLines=this.codeString.split("\n"),this.codeLength=this.codeLines.length,this.tokenizedCode=[]}Code.prototype.getCodeLength=function(){return this.codeLength},Code.prototype.getLine=function(e){return e>=0&&e<this.codeLength?this.codeLines[e]:void 0},Code.prototype.getTokenizedLine=function(e){return e>=0&&e<this.codeLength?this.tokenizedCode[e]:void 0},Code.prototype.checkAlphaNumeric=function(e){var n,o,i;for(o=0,i=e.length;i>o;o++)if(n=e.charCodeAt(o),!(n>47&&58>n||n>64&&91>n||n>96&&123>n))return!1;return!0},Code.prototype.exciseString=function(e){e=e.substring(1,e.length);var n=e.split(TERMINALS.SYMBOLS.QUOTE);1==n.length;var o=n.shift(),i=n.join();return[TERMINALS.SYMBOLS.QUOTE+o+TERMINALS.SYMBOLS.QUOTE,i]},Code.prototype.implode=function(e,n,o,i){for(var t=Array(),r=o;i>=r;r++)t.push(e[r]);return t.join(n)},Code.prototype.tokenizeLine=function(e,n){var o=new Array;console.log("Line "+e+" Codeline: "+n);var i=n.trim().split(" ");console.log("Line "+e+" Pass: "+i);for(var t=0,r=i.length;r>t;t++){var s=i[t].trim();if(console.log("Line "+e+" Token "+t+": "+s),s.length>0)if(this.checkAlphaNumeric(s))console.log("Line "+e+" "+s+" is alphanumeric, pushing"),o.push(s);else{if(console.log("Line "+e+" "+s+" is not alphanumeric"),s.indexOf(TERMINALS.SYMBOLS.QUOTE>-1)&&s.substring(0,1)==TERMINALS.SYMBOLS.QUOTE){console.log("Line "+e+" "+s+" contains a Type 3 (string)");var h=this.implode(i," ",t,i.length-1),c=this.exciseString(h);if(o.push(c[0]),h=c[1]){var p=this.tokenizeLine(e,h);p.forEach(function(e){o.push(e)})}return o}if(s.indexOf(TERMINALS.SYMBOLS.DASH)>-1&&s.substring(0,1)==TERMINALS.SYMBOLS.DASH){console.log("Line "+e+" "+s+" contains a Type 4 (negative number)");for(var l=1,u=2,L=TERMINALS.SYMBOLS.DASH;u<=s.length&&!isNaN(s.substring(l,u));)L+=s.substring(l,u),l++,u++;o.push(L);var a=s.substring(l,s.length),h=a+this.implode(i," ",t+1,i.length-1);if(h){var p=this.tokenizeLine(e,h);p.forEach(function(e){o.push(e)})}return o}console.log("Line "+e+"  "+s+" contains a Type 1 (symbol)");var g=TERMINALS.searchForTerminal(s,"SYMBOLS");if(g){var d=s.split(g),f=d.shift();console.log("Line "+e+" Left: "+f);var S=d.join();console.log("Line "+e+" Right: "+S),f&&o.push.apply(o,this.tokenizeLine(e,f)),o.push(g),S&&o.push.apply(o,this.tokenizeLine(e,S));break}}}return o},Code.prototype.tokenizeCode=function(){for(var e=0,n=this.codeLines.length;n>e;e++){var o=this.tokenizeLine(e,this.codeLines[e]);this.tokenizedCode.push(o)}},Code.prototype.printTokens=function(e){var n=e.join("|");return n},Code.prototype.printAllTokens=function(){var e=this,n="";return this.tokenizedCode.forEach(function(o){n+=e.printTokens(o)+"\n==========\n"}),n};
var INTERPRETER={varStack:{},methodTable:{},extMethodTable:{},currentLineNum:0,code:{},body:{},getCurrentLineNum:function(){return this.currentLineNum},setCurrentLineNum:function(e){e>=0&&e<=this.code.getCodeLength()&&(this.currentLineNum=e)},getCurrentLine:function(){return this.code.getLine(this.currentLineNum)},getCurrentLineTokens:function(){return this.code.getTokenizedLine(this.currentLineNum)},goToNextLine:function(){return this.currentLineNum<this.code.getCodeLength()&&this.currentLineNum++,this.code.getLine(this.currentLineNum)},initialize:function(){},loadCode:function(e){this.code=new Code(e),this.code.tokenizeCode()},parseCode:function(){this.body=new Body(this,null,this.code),console.log(this.body)},printAllTokens:function(){return this.code.printAllTokens()},showMessage:function(e){return"parse"==e?!0:"validate"==e?!1:"debug"==e?!0:!0},error:function(e,n,t,i){var o=e.toUpperCase()+" ERROR Near Line "+n+": "+t+"\n"+i;throw console.log(o),new Error(o)},write:function(e,n){this.showMessage(e)&&console.log(n)},writeln:function(e,n){this.showMessage(e)&&console.log(n+"\n")}};
function Stmt(t,e){if(this.interpreter=t,this.body=e,this.lineNum=this.interpreter.getCurrentLineNum(),this.codeLine=this.interpreter.getCurrentLine(),this.tokenizedCode=this.interpreter.getCurrentLineTokens(),this.stmt={},this.stmtType=null,this.stmtType=TERMINALS.searchForTerminal(type[0],"STMTTYPES"),this.stmtType)if(this.stmtType==TERMINALS.STMTTYPES.VARDECL)this.stmt=new Vardecl(this.interpreter,this.body);else if(this.stmtType==TERMINALS.STMTTYPES.ASSIGN)this.stmt=new Assignment(this.interpreter,this.body);else if(this.stmtType==TERMINALS.STMTTYPES.METHODDEFINE)this.stmt=new MethodDefine(this.interpreter,this.body);else if(this.stmtType==TERMINALS.STMTTYPES.METHOD){var i=this.code.substring(this.code.length-1);!i==TERMINALS.STMTTYPES.SEMICOLON&&this.interpreter.error("METHOD",this.lineNum,this.codeLine,"Missing Semicolon"),this.stmt=new Method(this.interpreter,this.body,this.codeLine.substring(0,this.code.length-1))}else this.stmtType==TERMINALS.STMTTYPES.RETURN?this.stmt=new Return(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.IF?this.stmt=new If(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.ELSEIF?this.interpreter.error("STMT",this.lineNum,this.code,"ELSEIF must follow IF"):this.stmtType==TERMINALS.STMTTYPES.ELSE?this.interpreter.error("STMT",this.lineNum,this.code,"ELSE must follow IF or ELSEIF"):this.stmtType==TERMINALS.STMTTYPES.LOOPUNTIL?this.stmt=new LoopUntil(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.LOOPFOR?this.stmt=new LoopFor(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.WAITUNTIL?this.stmt=new WaitUntil(this.interpreter,this.body):this.stmtType==TERMINALS.STMTTYPES.WAITFOR&&(this.stmt=new WaitFor(this.interpreter,this.body));else this.interpreter.error("STMT",this.lineNum,this.code,"STMT type is not valid.")}Stmt.prototype.type=function(){return this.stmtType},Stmt.prototype.getStmt=function(){return this.stmt},Stmt.prototype.print=function(){stmt.print()};
function StmtList(t,e){for(this.interpreter=t,this.body=e,this.stmt={},this.nextStmt={};0==this.interpreter.getCurrentLine().trim().length;)this.interpreter.goToNextLine();this.interpreter.getCurrentLineNum()!=this.body.getFinishLine()&&(this.stmt=new Stmt(this.interpreter,this.body,this.code)),t.goToNextLine(),null!=this.interpreter.getCurrentLine()&&this.interpreter.getCurrentLineNum()!=this.body.getFinishLine()&&(this.nextStmt=new StmtList(this.interpreter,this.body))}StmtList.prototype.getStmt=function(){return this.stmt},StmtList.prototype.getNextStmt=function(){return this.nextStmt},StmtList.prototype.print=function(){null!=this.stmt?(this.stmt.print(),this.interpreter.write("parse","\n"),null!=this.nextStmt&&this.nextStmt.print()):this.interpreter.writeln("parse","EMPTY STMTLIST")};
var TERMINALS={SYMBOLS:{OPENPAREN:"(",CLOSEPAREN:")",OPENBRACE:"{",CLOSEBRACE:"}",OPENBRACKET:"[",CLOSEBRACKET:"]",QUOTE:'"',SEMICOLON:";",EQUALS:"=",COMMA:",",EQ:"==",NEQ:"!=",LT:"<",GT:">",LTE:"<=",GTE:">=",DASH:"-"},comparators:[this.EQ,this.NEQ,this.LT,this.GT,this.LTE,this.GTE],VOID:"void",INT:"int",STRING:"string",BOOL:"bool",TRUE:"true",FALSE:"false",AND:"and",OR:"or",VAR:"var",dataTypes:[this.VOID,this.INT,this.STRING,this.BOOL],logOps:[this.AND,this.OR],booleanVals:[this.TRUE,this.FALSE],STMTTYPES:{ASSIGN:"assign",VARDECL:"vardecl",METHODDEFINE:"methoddefine",METHOD:"method",RETURN:"return",IF:"if",ELSEIF:"elseif",ELSE:"else",LOOPUNTIL:"loopuntil",LOOPFOR:"loopfor",WAITUNTIL:"waituntil",WAITFOR:"waitfor"},callTypes:[this.VAR,this.METHOD],reservedWords:[this.OPENPAREN,this.CLOSEPAREN,this.OPENBRACE,this.CLOSEBRACE,this.OPENBRACKET,this.CLOSEBRACKET,this.QUOTE,this.SEMICOLON,this.COMMA,this.EQ,this.NEQ,this.LTE,this.GTE,this.EQUALS,this.LT,this.GT,this.DASH,this.VOID,this.INT,this.STRING,this.BOOL,this.AND,this.OR,this.TRUE,this.FALSE,this.ASSIGN,this.VARDECL,this.METHODDEFINE,this.METHOD,this.RETURN,this.IF,this.ELSEIF,this.ELSE,this.LOOPUNTIL,this.LOOPFOR,this.WAITUNTIL,this.WAITFOR,this.VAR,this.METHOD],searchForTerminal:function(i,t){if(null!=this[t])for(var s in this[t])if(this[t].hasOwnProperty(s)&&i.indexOf(this[t][s])>-1)return this[t][s];return FALSE}};